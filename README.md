# Wemos Remote

Wemos remote - проект для керування авто моделлю з додатку на телефоні. 

Керування реалізовано на процесорі ESP8266. Цей процесор компактний, має вбудований Wi-Fi модуль і адаповане ядро під фреймворк Arduino. Прошивка реалізована у середовищі Visual Studio 2019 з використанням фреймворків:
* Arduino https://www.arduino.cc/en/Main/Software
* RemoteXY http://remotexy.com/ https://github.com/RemoteXY/RemoteXY-Arduino-library
* ESP8266 https://github.com/esp8266/Arduino
* jQuery https://jquery.com/
* Bootstrap https://getbootstrap.com/
* ESPAudio https://github.com/earlephilhower/ESP8266Audio

При необхідності скетч можна редагувати у середовищі Arduino IDE.


# Основні можливості
## Можливості прошивки
* Керування через Wi-Fi з телефона під управленням Android/iOS (з допомогою бібліотеки RemotXY http://remotexy.com). Проект інтерфейсу додатку можна знайти тут http://remotexy.com/ru/editor/321f7c2c5d592ddd85a15c3eff2505cf/
* Керування одним двигуном постійного струму
* Керування одним сервомотором
* Імітація постановки/зняття з сигналізації під час під'єднання/від'єднання додатку телефона
* Імітація клацання реле поворотів та пікання брелка сигналізації
* Автоматичне увімкнення/вимкнення поворотів під час їзди
* Автоматичне включення стопсигналу під час гальмування та зупинки
* Автоматичне включення лампи заднього ходу під час руху назад
* Окрема кнопка для аварійної сигналізації
* Перключення освітлення Вимк->Стоянкові вогні->Освітлення

## Параметри, що налаштовуються
Прошивка має можливість налаштування.

Основні параметри:

* Назва точки доступу
* Пароль точки доступу
* Налаштування сервоприводу
  * Кут центрального положення сервомотора
  * Кут крайнього лівого положення
  * Кут крайнього правого положення
  * Лінійність сервоприводу
* Налаштування мотора
  * Мінімальне значення ШІМ для того, щоб зрушити з місця
  * Лінійність газу
* Налаштування світла
  * Яскравість основного світла
  * Яскравість дальнього світла
  * Яскравість габаритних стоянкоянкових вогнів
  * Яскравість поворотників
  * Тривалість включення стопсигналу після зупинки моделі
  * Затримка вимкнення ліхтаря заднього ходу після зупинки
  * Яскравість ліхтаря заднього ходу


# Мені вже все подобається! З чого розпочати?
## Що необхідно?
Зробити радіокерування для моделі дуже просто.

Базовий набір:
* Завантажена з GitHub копія проекту
* Модуль, або відлагоджувальна плата на базі процесора ESP8266 (Наприклад ESP12, ESP12-S, [Wemo D1 mini](https://wiki.wemos.cc/products:retired:d1_mini_v2.2.0), або інша.)
* Драйвер двигуна
* Сервопривід
* Комп'ютер з USB
* Веб-переглядач для налаштування

Додаткові інструменти, якщо ви захочете переробити прошивку під більш складні задачі:
* Arduino IDE
* Встановлена бібіліотека для ESP8266

## Прошивка 
Детальний опис усіх кроків прошивки можна прочитати у розділі WIKI цього проекту
https://github.com/KushlaVR/WemosRemote/wiki/%D0%9F%D1%80%D0%BE%D1%88%D0%B8%D0%B2%D0%BA%D0%B0

## Налаштування
Для налаштування вам необхідно на телефоні під'єднатися до Wi-Fi мережі Wemos_00000000 (замість нулів буде серійний номер вашої плати).
Стандартний пароль - 12345678. Ви можете його змінити за вашим бажанням.

Після підключення відкриваєте веб-переглядач і переходите за адресою 192.168.4.1 - це адреса для налаштувань.

### Налаштування точки доступу
![Config](/img/config.png)
* SSID - назва вашої моделі у Wi-Fi мережі. Це може бути, наприклад, номерний знак, або ваш нікнейм...
* PASSWORD - пароль доступу. Типово встановлено 12345678

### Налаштування сервоприводу
![Servo](/img/servo.png)
* center - Положення сервоприводу при русі прямо, в градусах
* left - Положення сервопривду при вивороті коліс до упору в ліво, в градусах
* right - Положення сервопривду при вивороті коліс до упору в право, в градусах
* Stearing potenciometer linearity - лінійність керма
  * Linear - кермо лінійне. Відхилення керма на 1 градус повертає колеса на 1 градус.
  * Y = X^2/X кермо не лінійне. При позиціях, близьких до нуля, на один градус зміни положення керма колеса повертаються менше.
При позиціях, близьких до крайніх положень, колеса повертаються швидко. На високих швидкостях це дозволяє маневрувати плавніше.

### Налаштування тягового мотора
![Engine](/img/engine.png)
* Minimum PWM speed - мінімальне значення ШІМ, яке необхідне для того, щоб мотор міг зрушити модель з місця.
* Speed potenciometer linearity - лінійність значень потенціометра.
  * Linear - потенціометр лінійний.
  * Y = X^2/X Потенціометр не лінійний. При позиціях близьких до нуля на одиницю зміни положення потенціометра швидкусть наростає повільно.
При позиціях, близьких до максимальних положень, швидкість наростає швидко.

### Налаштування світла
![Light](/img/light.png)
* Head light PWM - значення ШІМ для переднього світла фар
* High light PWM - значення ШІМ для дальнього світла фар
* Parking light PWM - значення ШІМ для габаритних стоянкових вогнів
* Turn light PWM - значення ШІМ для поворотів та аварійної світлової сигналізації
* Stop light PWM - Значеня ШІМ для стоп-сигналу
* Stop light duration - проміжок часу, на який включається стоп-сигнал після зупинки моделі
* Back light timeout - проміжок часу, через який вимикається світло заднього ходу після зупинки моделі
* Back light PWM - Значення ШІМ для світла заднього ходу


## Підключення

1) Сервопривід Керуючий вивід => D5
2) Керуючий вхід тягового регулятора => D7
3) Габарит => D0
4) Головне світло => D4
5) Дальнє світло => D6
6) Лівий поврот => D2
7) Правий поворот => D1
8) Задній хід => D3
9) Стоп-сигнал => D8
10) Бузер => RX

